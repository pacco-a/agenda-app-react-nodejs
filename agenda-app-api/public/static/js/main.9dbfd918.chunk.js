(this["webpackJsonpagenda-app-client"]=this["webpackJsonpagenda-app-client"]||[]).push([[0],{30:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(8),o=n.n(r),s=n(2),i=(n(30),n(4)),u=n(6),d=n.n(u),l=n(9),j=n(5),b=n(10),p=n.n(b),f=n(7),O=n.n(f),k={currentDate:new Date(Date.now()).toISOString().substring(0,10),currentTasks:[]},m=Object(j.b)("tasks/fetchCurrentDateTasks",function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("api call for fetch tasks"),e.next=3,p.a.get("/api/tasks/week?date=".concat(new Date(t).toISOString().substring(0,10)));case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),h=Object(j.b)("tasks/addOneTask",function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("api call for add one task"),e.next=3,p.a.post("/api/tasks",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(j.b)("tasks/updateOneTask",function(){var e=Object(l.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw new Error("ITask objects needed ID for update request");case 2:return e.next=4,p.a.patch("/api/tasks",t);case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),g=Object(j.c)({name:"tasks",initialState:k,reducers:{setDate:function(e,t){e.currentDate=t.payload}},extraReducers:function(e){e.addCase(m.fulfilled,(function(e,t){e.currentTasks=t.payload})),e.addCase(h.fulfilled,(function(e,t){var n=t.payload;O()(e.currentDate).isSame(n.date,"week")&&e.currentTasks.push(n)})),e.addCase(x.fulfilled,(function(e,t){var n=t.payload;e.currentTasks=e.currentTasks.map((function(e){return e.id===n.id?n:e}))}))}}),v=g.actions.setDate,D=g.reducer,y=Object(j.c)({name:"ui",initialState:{addTaskPopupOn:!1,taskItemPopupOn:!1,taskItemPopup:{resume:"none",color:"none",date:"none",details:"none",done:!1}},reducers:{toggleAddTaskPopup:function(e){e.addTaskPopupOn=!e.addTaskPopupOn},toggleTaskItemPopup:function(e){e.taskItemPopupOn=!e.taskItemPopupOn},setTaskItem:function(e,t){e.taskItemPopup=t.payload}}}),w=y.actions,C=w.toggleAddTaskPopup,I=w.toggleTaskItemPopup,S=w.setTaskItem,T=y.reducer,P=n(0),N=function(e){var t=e.customOnClick,n=e.initColor;return Object(P.jsxs)("div",{onClick:function(e){var n=e.target;if(n.classList.contains("color-box")){if(!n.parentElement)throw new Error("no parent ?");for(var a=0,c=Array.from(n.parentElement.children);a<c.length;a++){c[a].classList.remove("color-selected")}n.classList.add("color-selected"),t(n.classList[1])}},className:"color-selector",children:[Object(P.jsx)("div",{className:"color-box red color-red ".concat("red"===n&&"color-selected"," ")}),Object(P.jsx)("div",{className:"color-box blue color-blue ".concat("blue"===n&&"color-selected"," ")}),Object(P.jsx)("div",{className:"color-box orange color-orange ".concat("orange"===n&&"color-selected"," ")}),Object(P.jsx)("div",{className:"color-box green color-green ".concat("green"===n&&"color-selected"," ")}),Object(P.jsx)("div",{className:"color-box pink color-pink ".concat("pink"===n&&"color-selected"," ")})]})},A=function(){var e=Object(s.c)((function(e){return e.tasks})).currentDate,t=Object(s.b)(),n=Object(a.useState)(""),c=Object(i.a)(n,2),r=c[0],o=c[1],u=Object(a.useState)(e),d=Object(i.a)(u,2),l=d[0],j=d[1],b=Object(a.useState)(""),p=Object(i.a)(b,2),f=p[0],O=p[1],k=Object(a.useState)("blue"),m=Object(i.a)(k,2),x=m[0],g=m[1];return Object(P.jsx)("div",{onMouseDown:function(e){"addtask-form-container"===e.target.id&&t(C())},id:"addtask-form-container",children:Object(P.jsxs)("form",{onSubmit:function(e){e.preventDefault(),t(h({resume:r,date:l,details:f,done:!1,color:x})),t(C())},children:[Object(P.jsx)("input",{type:"text",name:"resume",placeholder:"nom de la t\xe2che",value:r,onChange:function(e){return o(e.target.value)}}),Object(P.jsx)("input",{type:"date",name:"date",value:l,onChange:function(e){return j(e.target.value)}}),Object(P.jsx)("textarea",{name:"details",placeholder:"details de la tache",value:f,onChange:function(e){return O(e.target.value)}}),Object(P.jsx)(N,{customOnClick:function(e){g(e)},initColor:x}),Object(P.jsx)("button",{type:"submit",children:"Ajouter"})]})})},L=function(){var e=Object(s.b)();return Object(P.jsxs)("header",{children:[Object(P.jsx)("h1",{children:"Agenda App"}),Object(P.jsx)("button",{onClick:function(t){e(C())},children:"Ajouter une t\xe2che"})]})},M=function(e){var t=e.task,n=Object(s.b)();return Object(P.jsx)("div",{onClick:function(e){n(S(t)),n(I())},className:"schedule-item color-".concat(t.color," ").concat(t.done&&"done"),children:t.resume})},E=function(e){var t=e.dayIdentifier,n=e.tasks;return Object(P.jsxs)("div",{id:"".concat(t,"-column"),className:"schedule-column",children:[Object(P.jsx)("div",{className:"schedule-column-header",children:t}),n.map((function(e){return Object(P.jsx)(M,{task:e},e.id)}))]})},F=function(){var e=Object(s.c)((function(e){return e.tasks})),t=e.currentTasks,n=e.currentDate,c=Object(s.b)();Object(a.useEffect)((function(){c(m(n))}),[n,c]);var r=function(e){return"".concat(O()(n).day(e).format("DD"),"/").concat(O()(n).day(e).format("MM"))};return Object(P.jsxs)("div",{id:"schedule-container",children:[Object(P.jsx)(E,{dayIdentifier:"Lundi ".concat(r(1)),tasks:t.filter((function(e){return 1===new Date(e.date).getDay()}))}),Object(P.jsx)(E,{dayIdentifier:"Mardi ".concat(r(2)),tasks:t.filter((function(e){return 2===new Date(e.date).getDay()}))}),Object(P.jsx)(E,{dayIdentifier:"Mercredi ".concat(r(3)),tasks:t.filter((function(e){return 3===new Date(e.date).getDay()}))}),Object(P.jsx)(E,{dayIdentifier:"Jeudi ".concat(r(4)),tasks:t.filter((function(e){return 4===new Date(e.date).getDay()}))}),Object(P.jsx)(E,{dayIdentifier:"Vendredi ".concat(r(5)),tasks:t.filter((function(e){return 5===new Date(e.date).getDay()}))}),Object(P.jsx)(E,{dayIdentifier:"Autre",tasks:t.filter((function(e){return 6===new Date(e.date).getDay()||0===new Date(e.date).getDay()}))})]})},J=function(){var e=Object(s.c)((function(e){return e.tasks})).currentDate,t=Object(s.b)();return Object(P.jsxs)("div",{id:"schedule-navigator",children:[Object(P.jsx)("input",{onChange:function(e){isNaN(Date.parse(e.target.value))||t(v(e.target.value))},value:e,type:"date"}),Object(P.jsx)("button",{onClick:function(e){t(v(new Date(Date.now()).toISOString().substring(0,10)))},children:"Semaine actuelle"})]})},B=function(){var e=Object(s.c)((function(e){return e.ui})).taskItemPopup,t=Object(s.b)(),n=Object(a.useState)(e.resume),c=Object(i.a)(n,2),r=c[0],o=c[1],u=Object(a.useState)(e.date.substring(0,10)),d=Object(i.a)(u,2),l=d[0],j=d[1],b=Object(a.useState)(e.details),p=Object(i.a)(b,2),f=p[0],O=p[1],k=Object(a.useState)(e.color),m=Object(i.a)(k,2),h=m[0],g=m[1],v=Object(a.useState)(e.done),D=Object(i.a)(v,2),y=D[0],w=D[1];return Object(P.jsx)("div",{onClick:function(e){"taskitem-popup-container"===e.target.id&&t(I())},id:"taskitem-popup-container",children:Object(P.jsxs)("form",{onSubmit:function(n){n.preventDefault(),t(x({id:e.id,color:h,date:l,details:f,done:y,resume:r})),t(I())},id:"taskitem-popup",children:[Object(P.jsx)("input",{type:"text",name:"resume",placeholder:"nom de la t\xe2che",value:r,onChange:function(e){return o(e.target.value)}}),Object(P.jsx)("input",{type:"date",name:"date",value:l,onChange:function(e){return j(e.target.value)}}),Object(P.jsx)("textarea",{name:"details",placeholder:"details de la tache",value:f,onChange:function(e){return O(e.target.value)}}),Object(P.jsx)(N,{customOnClick:function(e){g(e)},initColor:h}),Object(P.jsxs)("div",{children:[Object(P.jsx)("label",{htmlFor:"done",children:"Fini : "}),Object(P.jsx)("input",{onChange:function(e){return w(e.target.checked)},checked:y,type:"checkbox",name:"done"})]}),Object(P.jsx)("button",{type:"submit",children:"Modifier"})]})})};var q=function(){var e=Object(s.c)((function(e){return e.ui})),t=e.addTaskPopupOn,n=e.taskItemPopupOn;return Object(P.jsxs)("div",{className:"App",children:[t&&Object(P.jsx)(A,{}),n&&Object(P.jsx)(B,{}),Object(P.jsxs)("div",{id:"main-container",children:[Object(P.jsx)(L,{}),Object(P.jsx)(J,{}),Object(P.jsx)(F,{})]})]})},R=Object(j.a)({reducer:{tasks:D,ui:T}}),V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};o.a.render(Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(s.a,{store:R,children:Object(P.jsx)(q,{})})}),document.getElementById("root")),V()}},[[51,1,2]]]);
//# sourceMappingURL=main.9dbfd918.chunk.js.map